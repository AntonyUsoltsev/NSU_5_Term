✅Игровое поле - прямоугольник со сторонами, заданными в конфиге игры.

✅Горизонтальные ряды клеток назовём строками, вертикальные - столбцами.

✅При этом поле логически замкнуто с противоположных сторон: с самой левой клетки строки можно перейти влево на самую
правую клетку той же строки, аналогично для самой верхней клетки столбца (математически это дискретный тор).

✅Змейка представляет собой последовательность клеток на игровом поле, образующих непрерывную ломаную линию с прямыми
углами изгиба (см. рисунок).

✅Таким образом, змейка может пересекать границы поля неограниченное число раз.

✅Клетка на одном из концов змейки - голова, направлением движения которой управляет игрок, клетка на противоположном
конце - хвост.

✅На поле могут быть расположены одна или более змеек, каждой змейкой управляет один игрок.

✅Также на поле в каждый момент времени присутствует еда в количестве, вычисляемом по формуле (food_static + (число
ALIVE-змеек)).

✅Каждая еда занимает 1 клетку.

✅На одной клетке не может находиться две еды.

✅Еда на поле размещается случайным образом на пустых клетках.

✅Если на текущем ходе на поле не хватает клеток, чтобы разместить требуемое количество еды, то размещается столько,
сколько возможно.

✅Время в игре дискретное, состояния сменяются через интервал реального времени в миллисекундах, заданный в конфиге.

✅За время между сменами состояния (за один "ход") у игроков есть возможность сменить направление головы своей змейки с
помощью команды SteerMsg.

✅Если команда заставляет змейку повернуть в направлении, занятом соседней с головой клеткой (попытка повернуть вспять),
то такая команда игнорируется.

✅Игрок может успеть заменить предыдущую команду путём отправки новой команды, но если команда не успела дойти до момента
смены состояния, то она применяется на следующем ходу.

✅В момент смены состояния голова каждой змейки продвигается на 1 клетку в текущем своём направлении.

✅Если клетка, куда перешла голова, содержала еду, то остальные клетки змеи не сдвигаются, а игрок зарабатывает +1 балл.

✅А если еды не было, то все последующие клетки змейки продвигаются на место предыдущих, а клетка, на которой находился
хвост, освобождается.

✅Далее проверяется получившееся состояние целевой клетки, куда перешли головы змеек.

✅️Если целевая клетка занята змейкой (своим телом, хвостом или любой чужой клеткой), то "врезавшаяся" змейка погибает, а
игрок выбывает из игры.

✅Клетки, которые занимает погибшая змейка (после перемещения головы), с вероятностью 0.5 превращаются в еду, а остальные
клетки становятся пустыми.

✅Змейка, в которую "врезались", зарабатывает +1 балл (если она не врезалась сама в себя, конечно).

✅Змейка погибает независимо от того, погибает ли на этом же ходу змейка, в которую она "врезалась".

✅️Если на одну и ту же клетку наехало несколько голов, то все эти змейки погибают таким же образом.

✅Таким образом можно, например, вплотную преследовать свой собственный (или чужой хвост), не погибая.

✅Но если при этом чужая змейка съест еду, то мы на этом ходу "врежемся" в её хвост.

✅В случае если на клетке была еда, и на неё наехало несколько голов одновременно, то еда съедается, хвосты всех этих
змеек остаются на месте, но потом они все умирают.



Problems:
✅ Сохранить Ip и порт сервера мастера
✅ Передать Steer от Normal
✅ (НО надо проверить корректность) Получить и применить Steer в мастере
✅ Собрать GameState в мастере и отправить
✅ Получить GameState в Normal:
    ✅ Проверить что своя змейка еще есть на поле, иначе GameOver (Или тут прилетит RoleChange????)
  - В случае смерти перейти в режим GameOver
    ✅ Высчитать длину своей змейки для подсчета очков (UPD: не надо так как счет передается)
    ✅ Записать информацию о змейках в мапы
    ✅ Отправить на отрисовку
✅ Получить GameState в Viewer:
    ✅ Записать информацию о змейках в мапы (??)
    ✅ Отправить на отрисовку
✅ В мастере поправить ивент на кнопки (имеет смысл делать запись в мапу состояний идентично нормал змейкам, а не сразу менять состояние модели)
✅ Пофиксить выделение квадрата для третей змейки
✅ Пофиксить отображение счета
✅ Выводить пользователю цвет (?) -- замена на подсвечивание счета 
✅ Ip при парсинге State
✅-1 -1 при росте змеи и при врезании
✅ Сделать String для ip port
- Сделать record (x y) для яблока
✅ Передача ролей:
  ✅ Выбор Deputy
  ✅ Перевыбор Deputy
  ✅Передача роли мастера при смерти мастера
  ✅ В случае когда deputy стал master:
    ✅ Перестать слать ping
    ✅Начать слать Anouns
    ✅ Normal становится viewer при смерти
  ✅ Если мастеру некому передать роль то (UPD - значит он один игрок и можно звершать игру)
✅ Сделать Zombie змейку при выходе игрока
✅ Проверить что игрок отключился:
  ✅ Удалить его из всех мап
✅ Поправить прием Steer:
  ✅ Вместо id использовать ip

- Поправить меню
✅ Сделать вывод счета для всех
✅ Сделать динамический размер клеток
✅ Сделать динамический размер счета
✅ Поправить Anons
✅ Сделать Ping
- Удалять игроков при отключении

- Questions:
  - Что делать когда мастер врезался

✅ Пофиксить закрытия пула потоков: создать в udpController свой, а не передать
- Пофиксить закрытия пула потоков в receiver
- Пофиксить случай когда не может выделиться змейка
- Пофиксить send state, когда только ZOMBIE
